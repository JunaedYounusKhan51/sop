---
output: pdf_document
---

Modeling developmental changes in learning due to accuracy and speed of processing
==================================================================================

```{r, echo=FALSE, include=FALSE}
rm(list=ls())
library(knitr)
source("~/Projects/R/Ranalysis/useful_dplyr.R")
opts_chunk$set(echo=FALSE, message=FALSE, 
               warning=FALSE, error=FALSE, 
               cache=TRUE, results='hide') 
```

Introduction 
------------

Theorists often look to representational shifts as a source for developmental change. But speed of processing changes dramatically across the lifespan. 

Consider the function from Kail (1986), Expt 1 (replotted from Kail, 1991):

```{r fig.width=4, fig.height=3}
a <- 1
b <- 5.16
c <- 0.21

xs <- seq(4,20,.1)
d <- data.frame(x = xs,
                y = a + b * exp(-c * xs))
qplot(x, y, geom=c("line"), 
      data=d) + 
  geom_hline(aes(yintercept=.5), lty=2) + 
  xlab("Age (years)") + 
  ylab("RT (sec)") + 
  ylim(c(0,6)) + xlim(c(4,20))
```

Now consider when the speed of processing model is projected into infancy:

```{r fig.width=4, fig.height=3}
xs <- seq(0,20,.1)
d <- data.frame(x = xs,
                y = a + b * exp(-c * xs))
qplot(x, y, geom=c("line"), 
      data=d) + 
  geom_hline(aes(yintercept=.5), lty=2) + 
  xlab("Age (years)") + 
  ylab("RT (sec)") + 
  ylim(c(0,6)) + xlim(c(0,20))
```

Of course we can't really see what the infants should be doing, because they can't do mental rotation in precisely this way. 

Here's an outline of my argument:

* Speed of processing (SOP) increases -- so time-to-process (TTP) decreases -- via the Kail exponentials. 
* Accuracy also increases.
* When you start to chain tasks together, the time it takes to complete them goes up dramatically for younger kids. 
* In a dynamic world, that's a problem. 
* The number of learning opportunities available will decrease dramatically as speed and accuracy change. 

Let's look at SOP in word recognition. 

Word Recognition SOP
--------------------

Here are some data from a number of experiments by Swingley, Fernald, and us.

```{r}
d <- read.csv("~/Projects/sop/data/data.csv")
```

Let's put them into the same kind of plot that Kail was using. Note that this is a hack -- the horizontal line is just the mean of the adult studies.

```{r}

d.kid <- d %>% 
  filter(age < 5)
d.adult <- d %>% 
  filter(age > 20) %>% 
  summarise(rt = mean(rt))

ggplot(d.kid, aes(x = age, y = rt)) + 
  geom_point(aes(size = n, col = study), 
             position=position_dodge(width=.05)) + 
  geom_linerange(aes(ymin = rt - cih, 
                     ymax = rt + cil, 
                     col = study), 
                 position=position_dodge(width=.05)) +
  geom_smooth(method="lm", formula=y ~ log(x), col="black", lty=3) + 
  geom_hline(aes(yintercept=d.adult$rt), lty=2) +  
  ylim(c(0,2)) + 
  xlim(c(0,5)) + 
  xlab("Age (years)") + 
  ylab("Reaction Time (s)")
```

Now let's actually add on the Kail analysis, where we are predicting RT as a function of age via the formula:

$m_i = a + b * e^{-ci}$

where $m_i$ is the predicted RT at a particular age, $a$ is the adult value, again here just the mean, $i$ is the age, $b$ is a multiplier, and $c$ is a decay parameter. So this is essentially a two free parameter model (multiplier and decay). 

```{r}
a = d.adult$rt

fn <- function(x, a) {
  a = .55
  b = x[1]
  c = x[2]
  df <- d.kid
  df$pred <- a + b * exp(-c * df$age)
  err <- mean((df$rt - df$pred)^2)
  return(err)
}

opt <- optim(c(1,1.5), fn, a)

d.kid$pred <- a + opt$par[1] * exp(-opt$par[2] * d.kid$age)
```

Now put that fit into the same plot.

```{r}
xs <- seq(0,5,.1)
d.pred <- data.frame(x = xs,
                     y = a + opt$par[1] * exp(-opt$par[2] * xs))

ggplot(d.kid, aes(x = age, y = rt)) + 
  geom_point(aes(size = n, col = study), 
             position=position_dodge(width=.05)) + 
  geom_linerange(aes(ymin = rt - cih, 
                     ymax = rt + cil, 
                     col = study), 
                 position=position_dodge(width=.05)) +
  geom_hline(aes(yintercept=d.adult$rt), lty=2) +  
  geom_line(data=d.pred, aes(x = x, y = y), col="black", lty=3) +
  ylim(c(0,2)) + 
  xlim(c(0,5)) + 
  xlab("Age (years)") + 
  ylab("Reaction Time (s)")
```

Here the upshot is that early on in language learning, e.g. first or second year, it's going to be very slow to identify a mismatching word. 

Gaze following SOP Analysis
---------------------------



Chaining together SOP and Accuracy
----------------------------------

Let's just look at some simple exponential simulations. Consider processes with success probability $p_1 = .9$, $p_2 = .8$, and $p_3 = .7$. What happens when we chain these together?

```{r}
p1 = .9
p2 = .8
p3 = .7

df <- data.frame(prob1 = c(p1,p2,p3,
                          p1*p1,p1*p2,p1*p3,p2*p2,p2*p3,p3*p3), 
                 steps = c(1,1,1,
                           2, 2, 2, 2, 2, 2))

qplot(steps, prob1, data=df)
```
```
